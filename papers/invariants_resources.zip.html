<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) & !(IE 8)]><!-->
<html lang="en-US">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>Resources for &#8220;Searching for Invariants using Genetic Programming and Mutation Testing&#8221; | David R. White</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="http://www.davidrwhite.co.uk/xmlrpc.php" />
<!--[if lt IE 9]>
<script src="http://www.davidrwhite.co.uk/wp-content/themes/twentytwelve/js/html5.js" type="text/javascript"></script>
<![endif]-->
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link href='https://fonts.gstatic.com' crossorigin rel='preconnect' />
<link rel="alternate" type="application/rss+xml" title="David R. White &raquo; Feed" href="http://www.davidrwhite.co.uk/feed/" />
<link rel="alternate" type="application/rss+xml" title="David R. White &raquo; Comments Feed" href="http://www.davidrwhite.co.uk/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="David R. White &raquo; Resources for &#8220;Searching for Invariants using Genetic Programming and Mutation Testing&#8221; Comments Feed" href="http://www.davidrwhite.co.uk/resources-for-searching-for-invariants-using-genetic-programming-and-mutation-testing/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.davidrwhite.co.uk\/wp-includes\/js\/wp-emoji-release.min.js?ver=9ab702457e115d470946999eb4979074"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='sfmsb-style-css'  href='http://www.davidrwhite.co.uk/wp-content/plugins/simple-follow-me-social-buttons-widget/assets/css/style.css?ver=3.3.3' type='text/css' media='all' />
<link rel='stylesheet' id='sfmsb-icons-css'  href='http://www.davidrwhite.co.uk/wp-content/plugins/simple-follow-me-social-buttons-widget/assets/css/icons.css?ver=3.3.3' type='text/css' media='all' />
<link rel='stylesheet' id='parent-style-css'  href='http://www.davidrwhite.co.uk/wp-content/themes/twentytwelve/style.css?ver=9ab702457e115d470946999eb4979074' type='text/css' media='all' />
<link rel='stylesheet' id='twentytwelve-fonts-css'  href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700&#038;subset=latin,latin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='twentytwelve-style-css'  href='http://www.davidrwhite.co.uk/wp-content/themes/twentytwelve-child/style.css?ver=9ab702457e115d470946999eb4979074' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentytwelve-ie-css'  href='http://www.davidrwhite.co.uk/wp-content/themes/twentytwelve/css/ie.css?ver=20121010' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='http://www.davidrwhite.co.uk/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='http://www.davidrwhite.co.uk/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='http://www.davidrwhite.co.uk/wp-content/plugins/simple-follow-me-social-buttons-widget/assets/js/front-widget.js?ver=3.3.3'></script>
<link rel='https://api.w.org/' href='http://www.davidrwhite.co.uk/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.davidrwhite.co.uk/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.davidrwhite.co.uk/wp-includes/wlwmanifest.xml" /> 

<link rel="canonical" href="http://www.davidrwhite.co.uk/resources-for-searching-for-invariants-using-genetic-programming-and-mutation-testing/" />
<link rel='shortlink' href='http://www.davidrwhite.co.uk/?p=58' />
<link rel="alternate" type="application/json+oembed" href="http://www.davidrwhite.co.uk/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.davidrwhite.co.uk%2Fresources-for-searching-for-invariants-using-genetic-programming-and-mutation-testing%2F" />
<link rel="alternate" type="text/xml+oembed" href="http://www.davidrwhite.co.uk/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.davidrwhite.co.uk%2Fresources-for-searching-for-invariants-using-genetic-programming-and-mutation-testing%2F&#038;format=xml" />
<script type="text/javascript">
(function(url){
	if(/(?:Chrome\/26\.0\.1410\.63 Safari\/537\.31|WordfenceTestMonBot)/.test(navigator.userAgent)){ return; }
	var addEvent = function(evt, handler) {
		if (window.addEventListener) {
			document.addEventListener(evt, handler, false);
		} else if (window.attachEvent) {
			document.attachEvent('on' + evt, handler);
		}
	};
	var removeEvent = function(evt, handler) {
		if (window.removeEventListener) {
			document.removeEventListener(evt, handler, false);
		} else if (window.detachEvent) {
			document.detachEvent('on' + evt, handler);
		}
	};
	var evts = 'contextmenu dblclick drag dragend dragenter dragleave dragover dragstart drop keydown keypress keyup mousedown mousemove mouseout mouseover mouseup mousewheel scroll'.split(' ');
	var logHuman = function() {
		if (window.wfLogHumanRan) { return; }
		window.wfLogHumanRan = true;
		var wfscr = document.createElement('script');
		wfscr.type = 'text/javascript';
		wfscr.async = true;
		wfscr.src = url + '&r=' + Math.random();
		(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(wfscr);
		for (var i = 0; i < evts.length; i++) {
			removeEvent(evts[i], logHuman);
		}
	};
	for (var i = 0; i < evts.length; i++) {
		addEvent(evts[i], logHuman);
	}
})('//www.davidrwhite.co.uk/?wordfence_lh=1&hid=0F1E374DD6BC129DA7EFF56D32D39AF1');
</script></head>

<body class="page-template-default page page-id-58 full-width custom-font-enabled single-author">
<div id="page" class="hfeed site">
	<header id="masthead" class="site-header" role="banner">
		<hgroup>
			<h1 class="site-title"><a href="http://www.davidrwhite.co.uk/" title="David R. White" rel="home">David R. White</a></h1>
			<h2 class="site-description"></h2>
		</hgroup>

		<nav id="site-navigation" class="main-navigation" role="navigation">
			<button class="menu-toggle">Menu</button>
			<a class="assistive-text" href="#content" title="Skip to content">Skip to content</a>
			<div class="menu-menu-1-container"><ul id="menu-menu-1" class="nav-menu"><li id="menu-item-53" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-53"><a href="http://www.davidrwhite.co.uk/">About</a></li>
<li id="menu-item-56" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-56"><a href="http://www.davidrwhite.co.uk/publications/">Publications</a></li>
<li id="menu-item-57" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-57"><a href="http://www.davidrwhite.co.uk/teaching/">Teaching</a></li>
<li id="menu-item-126" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-126"><a href="http://www.davidrwhite.co.uk/blog-2/">Blog</a></li>
</ul></div>		</nav><!-- #site-navigation -->

				<a href="http://www.davidrwhite.co.uk/"><img src="http://www.davidrwhite.co.uk/wp-content/uploads/2014/09/copy-stockholm.jpg" class="header-image" width="960" height="250" alt="David R. White" /></a>
			</header><!-- #masthead -->

	<div id="main" class="wrapper">
	<div id="primary" class="site-content">
		<div id="content" role="main">

							
	<article id="post-58" class="post-58 page type-page status-publish hentry">
		<header class="entry-header">
												<h1 class="entry-title">Resources for &#8220;Searching for Invariants using Genetic Programming and Mutation Testing&#8221;</h1>
		</header>

		<div class="entry-content">
			<p><strong>Authors: Sam Ratcliff, David R. White and John A. Clark</strong></p>
<p>(Sam Ratcliff and <a href="http://www.cs.york.ac.uk/~jac">John A. Clark </a>are at the <a href="http://www.cs.york.ac.uk/">University of York.</a></p>
<p>This <a href="http://davidrwhite.co.uk/wp-content/uploads/2014/09/searching_for_invariants_using_genetic_programming_and_mutation_testing.pdf">paper</a> investigated the use of GP to generate invariants for existing source code. We used a set of examples taken from Gries&#8217; &#8220;Science of Programming&#8221; and a few from online programming repositories. We used the <a href="http://cs.gmu.edu/~eclab/projects/ecj/">ECJ Toolkit</a>. Please note that <strong>Version 19</strong> of the toolkit was used. We then used <a href="http://www.cs.gmu.edu/~offutt/mujava/">muJava</a> to create mutants of the original program, which were used to create a heuristic estimating how &#8220;interesting&#8221; a particular invariant was.</p>
<p>This webpage contains online resources designed to enable other researchers to recreate and build upon our work.</p>
<p>We actively encourage feedback, debate, suggestions and constructive criticism: please feel free to <a href="mailto:david.r.white@glasgow.ac.uk">contact us</a>.</p>
<h2>Overview</h2>
<p>The code written for this work is not very general. It assumes that you are using Linux, and existing file structures and constants are hard-coded. We make no apologies for this &#8211; it is prototypical code. It is probably best to follow our instructions exactly until you are clear as to how the system works. Alterations can subsequently be made. If you improve the code, please let us know! The source code is a mess: there are lots of extra files, and some classes are very poorly documented.</p>
<p>We recommend running these experiments on a machine with at least 4GB RAM, due to the unnecessarily inefficient way data is passed from Daikon&#8217;s trace output to the evolutionary search. This results in significant slowdowns in running the experiments, which are separate from the actual time it takes to search the invariant space. We do apologise for this poor design.</p>
<h2>Download the Archive</h2>
<p><a href="http://davidrwhite.co.uk/wp-content/uploads/2014/09/invariants.tar.gz">This archive</a> contains the directory structure and files required to repeat our work.</p>
<p>If you&#8217;re interested in our work, please <a href="mailto:david.r.white@glasgow.ac.uk">contact us</a> so we can keep track of who is working in this area, and whether it is worthwhile spending some time cleaning up and documenting the source code properly, as well as making the tool more general.</p>
<h2>File System Structure</h2>
<p>Decompressing the archive should create a folder structure as follows, where &#8220;exp_root&#8221; is the containing directory:</p>
<ul>
<li>exp_root/experiment_a</li>
<li>exp_root/experiment_b</li>
<li>exp_root/experiment_c</li>
<li>exp_root/lib</li>
</ul>
<p>You will need to add the Daikon and ECJ jar files. Hence lib should contain the following:</p>
<ul>
<li>daikon.jar &#8211; version 4.6.4 of <a href="http://groups.csail.mit.edu/pag/daikon/">Daikon</a>.</li>
<li>ecj-19.jar &#8211; version 19 of the <a href="http://www.cs.gmu.edu/~eclab/projects/ecj/">ECJ toolkit</a>.</li>
<li>invariants.jar &#8211; the jar file included with the archive.</li>
<li>openjava2005.jar &#8211; OpenJava, required (and supplied) by muJava.</li>
</ul>
<p>You&#8217;ll also need to locate tools.jar for your JDK, so that you can add it to your classpath in the script used in Experiment C.</p>
<p>The contents of each experiment directory are detailed in the relevant sections below.</p>
<h2>Experimentation</h2>
<p>The work consisted of three experiments: A, B and C. The details of how to run each experiment follow.</p>
<h3>Experiment A</h3>
<h4>1. Create the Program Traces</h4>
<p>First, traces must be created for each example program. The programs can be found in exp_root/experiment_a/examples.</p>
<p>Change to the experiment_a directory and run &#8220;create_traces&#8221;. This will do some house-keeping and place the resulting traces in the exp_root/experiment_a/traces directory.</p>
<p>For each example, a display will show the progress of creating the 20 traces. This may take some time, and the traces produced are large. Note that the master seed used in the actual experimentation is still present in the script (taken from random.org).</p>
<h4>2. Run Daikon</h4>
<p>Generate Daikon&#8217;s invariants for comparison to the output of search.</p>
<p>Run &#8220;run_daikon&#8221; to do this. The results can be found in daikon_invariants.</p>
<p>Again, progress will be reported as this runs.</p>
<h4>3. Run Chicory Translate</h4>
<p>Run &#8220;chicory_translate&#8221;, which will translate the trace files from the Chicory front-end into ECJ parameter files. This is a slow process, as it is implemented inefficiently and dealing with large data. It was a poor design decision to require this translation, but for historical reasons it remains. To be removed in the future.</p>
<p>The output will be placed in the exp_root/experiment_a/ecj_param directory, containing parameter files for each program point in the traces of the example programs.</p>
<h4>4. Run ECJ</h4>
<p>Run &#8220;run_ecj&#8221; to actually execute the evolutionary search using the parameter files just generated. This script was originally designed to be executed on the Sun Grid Engine (SGE). To execute it on a single PC, ensure the line &#8220;SGE_TASK_ID=$1&#8221; is uncommented, and then supply an integer as a command line argument to the script. You&#8217;ll need to run the script with integers 1..10.</p>
<p>Again, due to the very inefficient way that the data is passed around, there may be significant delays. Whilst the evolutionary search takes only seconds, parsing the data from the parameter file brings a large overhead in space and time. This is a legacy issue. As a result, you&#8217;ll need at least 4GB of RAM to be sure of completing all runs of ECJ successfully.</p>
<h4>5. Compare Daikon to ECJ Results</h4>
<p>This required some manual work, due to the different output formats from the two tools. We took the output in daikon_invariants and manually wrote the files in the &#8220;expected&#8221; directory. We translated the invariants from Daikon format to a format comparable to the output of evolutionary search. These can be checked by hand, or you can assume we have done this correctly! Within the &#8220;expected&#8221; files, the format is simply one invariant per line, and in most cases we have also listed simple syntactic variants of the same invariants.</p>
<p>In order to compare the expected invariants, those found by Daikon, to the invariants found using search, run &#8220;check_daikon&#8221;. This uses the &#8220;check_against_daikon.py&#8221; script. As well as the commandline summary, a useful CSV format listing is produced named &#8220;expa.csv&#8221;. This can be used to recreate Tables 4 and 5 in the paper.</p>
<h4>6. Examining invariant growth versus Computation Effort</h4>
<p>To recreate Figure 3 from the paper, which examines the number of invariants found using search as the computational effort is increased, first run &#8220;chicory_growth&#8221; to create the ECJ input files. Then run &#8220;ecj_growth&#8221; to run the experiments. Again, this was written to be run on the Sun Grid Engine, so if you&#8217;re not using the SGE you&#8217;ll need to ensure SGE_TASK_ID=$1 is uncommented, and then run the file with integer arguments 1-10. The level of RAM your platform has will probably prove even more crucial here.</p>
<p>The output files are placed in ecj_invariants_growth, and wc -l can be used to produce the results given in Figure 3 of the paper.</p>
<h3>Experiment B</h3>
<p>In Experiment B, we attempt to find the invariants written by Gries and not those produced by Daikon.</p>
<h4>1. Generate ECJ parameter files</h4>
<p>First, run &#8220;chicory_translate&#8221; to produce the ECJ input files specific for the Gries invariants. This will automatically add in the functions from the bottom of Table 2 in the paper, those functions relevant to the Gries problems only. These will be placed in the ecj_param directory. Again, this could take some time.</p>
<h4>2. Run ECJ</h4>
<p>Run &#8220;run_ecj X&#8221; with arguments from 1-10 to execute the search with the extended function set, as well as larger population and generation sizes (of 250).</p>
<h4>3. Compare ECJ Output to Gries</h4>
<p>The invariants specified by Gries have been manually translated to a convenient format and placed in the &#8220;expected&#8221; directory. This allows a similar check to Experiment A, using python and bash scripts. Run &#8220;./check_gries&#8221; to produce human-readable stdout information, and a file &#8220;expb.csv&#8221; with the data in CSV format. These results are summarised in Table 6 of the paper.</p>
<h3>Experiment C</h3>
<p>In Experiment C, we re-run the 7th repetition from Experiment B (as it was the most successful in finding Gries invariants), and then attempt to order the invariants by interest using a &#8220;mutant fragility test&#8221;.</p>
<h4>Generate Mutants</h4>
<p>At the moment, we are unable to provide a simple way to recreate the mutants we used, as we took advantage of the muJava source code kindly provided by Jeff Offut. Instead we provide the mutants, and if you wish to download muJava and generate them, you are welcome to do so. The process is transparent &#8211; you can see the generated mutants in mujava/result.</p>
<h4>Create Mutant Traces</h4>
<p>Run &#8220;create_mutant_traces&#8221; to generate trace files for each mutant. The mnemonics represent muJava mutant types. The progress through each mutant is recorded in parentheses, so you can gauge the progress through each set of mutants for each program point.</p>
<h4>Create ECJ parameter files</h4>
<p>Run &#8220;chicory_translate&#8221; to create input files for ECJ.</p>
<h4>Run ECJ</h4>
<p>Run &#8220;run_ecj&#8221; to repeat the 7th repetition from Experiment B. At the end of the run, a mutant fragility test will be performed on the invariants before the results files are written.</p>
<h4>Examine Output</h4>
<p>The results were analysed by opening the invariant CSV files in ecj_invariants, and sorting the list by the mutation score. Finding a particular invariant that has not been easily highlighted by the fragility test is a little tricky, the simplest method being to use the stdout output from Experiment B&#8217;s &#8220;check_gries&#8221; script to locate where a match was found, such that the particular syntactic form of the invariant is identified. The CSV files can then be searched for that string.</p>
					</div><!-- .entry-content -->
		<footer class="entry-meta">
					</footer><!-- .entry-meta -->
	</article><!-- #post -->
				
<div id="comments" class="comments-area">

	
	
	
</div><!-- #comments .comments-area -->			
		</div><!-- #content -->
	</div><!-- #primary -->


		</div><!-- #main .wrapper -->
	<footer id="colophon" role="contentinfo">
		<div class="site-info">
						<a href="https://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
		</div><!-- .site-info -->
	</footer><!-- #colophon -->
</div><!-- #page -->

<script type='text/javascript' src='http://www.davidrwhite.co.uk/wp-content/themes/twentytwelve/js/navigation.js?ver=20140711'></script>
<script type='text/javascript' src='http://www.davidrwhite.co.uk/wp-includes/js/wp-embed.min.js?ver=9ab702457e115d470946999eb4979074'></script>
</body>
</html>